<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Voronoi Rectangle Mosaic</title>
    <script src="https://cdn.jsdelivr.net/npm/d3-delaunay@6"></script>
    <style>
      body {
        margin: 0;
        padding: 20px;
        font-family: Arial;
        text-align: center;
        background: #f0f0f0;
        /* 
display: grid;
grid-template-columns: repeat(auto-fit,1fr 2fr);; */
      }
      #canvas {
        display: block;
        margin: 20px auto;
        border: 1px solid #ccc;
        background: white;
      }
      input,
      button {
        padding: 8px 12px;
        font-size: 16px;
        margin: 5px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }
      button {
        background: #007bff;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="800" height="600"></canvas>

    <div>
      <h2>Voronoi Rectangle Mosaic</h2>
      <input
        type="number"
        id="numPoints"
        placeholder="Number of slices"
        min="5"
        max="200"
        value="20"
      />
      <button id="generateBtn">Generate Mosaic</button>
    </div>

    <script>
      const canvas = document.getElementById("canvas");
      canvas.style.height = (window.innerHeight / 100) * 80 + "px";
      canvas.style.width =window.innerWidth <= 500 ? window.innerWidth / 100 * 90 + "px":"600px";
      const ctx = canvas.getContext("2d");
      const button = document.getElementById("generateBtn");
      const numPointsInput = document.getElementById("numPoints");

      // Draw rectangle inside Voronoi cell
      function drawRectangleInCell(ctx, polygon) {
        // Calculate bounding box
        let minX = Infinity,
          minY = Infinity,
          maxX = -Infinity,
          maxY = -Infinity;
        for (const [x, y] of polygon) {
          if (x < minX) minX = x;
          if (y < minY) minY = y;
          if (x > maxX) maxX = x;
          if (y > maxY) maxY = y;
        }

        const width = maxX - minX;
        const height = maxY - minY;

        ctx.beginPath();
        ctx.rect(minX, minY, width, height);
        ctx.fillStyle = `hsl(${Math.random() * 360},70%,80%)`;
        ctx.fill();
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        ctx.stroke();
      }

      function generateVoronoiMosaic() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const numPoints = parseInt(numPointsInput.value) || 20;
        const width = canvas.width;
        const height = canvas.height;

        // Generate random points inside canvas
        const points = [];
        for (let i = 0; i < numPoints; i++) {
          points.push([Math.random() * width, Math.random() * height]);
        }

        // Generate Voronoi diagram
        const delaunay = d3.Delaunay.from(points);
        const voronoi = delaunay.voronoi([0, 0, width, height]);

        // Draw each Voronoi cell as rectangle
        for (let i = 0; i < numPoints; i++) {
          const cell = voronoi.cellPolygon(i);
          if (cell) drawRectangleInCell(ctx, cell);
        }
      }

      button.addEventListener("click", generateVoronoiMosaic);
    </script>
  </body>
</html>

<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Voronoi Random Shape Mosaic</title>
<script src="https://cdn.jsdelivr.net/npm/d3-delaunay@6"></script>
<style>
body { margin:0; padding:20px; font-family: Arial; text-align:center; background:#f0f0f0;}
#canvas { display:block; margin:20px auto; border:1px solid #ccc; background:white; }
input, button { padding:8px 12px; font-size:16px; margin:5px; border-radius:6px; border:1px solid #ccc;}
button { background:#007BFF; color:white; border:none; cursor:pointer;}
button:hover { background:#0056b3;}
</style>
</head>
<body>
<h2>Voronoi Random Shape Mosaic</h2>
<input type="number" id="numPoints" placeholder="Number of slices" min="5" max="200" value="20">
<button id="generateBtn">Generate Mosaic</button>
<canvas id="canvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const button = document.getElementById("generateBtn");
const numPointsInput = document.getElementById("numPoints");

function drawRandomPolygonInCell(ctx, polygon) {
    const shapeType = Math.random()<0.3 ? "triangle" : "polygon";
    const vertices = polygon;

    ctx.beginPath();
    if(shapeType==="triangle" && vertices.length>3){
        // pick 3 random points from cell
        const tri = [vertices[0], vertices[1], vertices[2]];
        ctx.moveTo(tri[0][0], tri[0][1]);
        ctx.lineTo(tri[1][0], tri[1][1]);
        ctx.lineTo(tri[2][0], tri[2][1]);
        ctx.closePath();
    } else {
        ctx.moveTo(vertices[0][0], vertices[0][1]);
        for(let i=1;i<vertices.length;i++){
            ctx.lineTo(vertices[i][0], vertices[i][1]);
        }
        ctx.closePath();
    }

    ctx.fillStyle = `hsl(${Math.random()*360},70%,80%)`;
    ctx.fill();
    ctx.strokeStyle = "black";
    ctx.lineWidth = 2;
    ctx.stroke();
}

function generateVoronoiMosaic() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    const numPoints = parseInt(numPointsInput.value) || 20;
    const width = canvas.width;
    const height = canvas.height;

    // Generate random points inside canvas
    const points = [];
    for(let i=0;i<numPoints;i++){
        points.push([Math.random()*width, Math.random()*height]);
    }

    // Generate Voronoi diagram
    const delaunay = d3.Delaunay.from(points);
    const voronoi = delaunay.voronoi([0,0,width,height]);

    // Draw each Voronoi cell with a random shape inside
    for(let i=0;i<numPoints;i++){
        const cell = voronoi.cellPolygon(i);
        if(cell) drawRandomPolygonInCell(ctx, cell);
    }
}

button.addEventListener("click", generateVoronoiMosaic);
</script>
</body>
</html>  
 -->

